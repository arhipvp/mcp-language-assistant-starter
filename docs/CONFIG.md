# Конфигурация

Переменные окружения читаются из файла `.env`.

| Переменная | Обязательна | Описание |
|------------|-------------|----------|
| `OPENROUTER_API_KEY` | да | API‑ключ OpenRouter. |
| `OPENROUTER_TEXT_MODEL` | да | Модель для текстовых запросов. |
| `ANKI_CONNECT_URL` | нет (по умолчанию `http://127.0.0.1:8765`) | URL сервера AnkiConnect. |
| `ANKI_DECK` | да | Название колоды Anki, куда добавлять карточки. |
| `ANKI_TAG` | нет (по умолчанию `tg-auto`) | Тег, которым помечаются карточки. |
| `TELEGRAM_BOT_TOKEN` | да | Токен Telegram‑бота. |
| `TEXT_MAX_RETRIES` | нет (по умолчанию `3`) | Максимум попыток текстовой генерации. |
| `IMAGE_MAX_RETRIES` | нет (по умолчанию `3`) | Максимум попыток генерации изображения. |
| `GENERATION_DELAY_MS` | нет (по умолчанию `0`) | Пауза между шагами `make_card` в миллисекундах. |
| `GENAPI_API_KEY` | нет | Ключ для GenAPI. Пустой — отключить генерацию изображений. |
| `GENAPI_MODEL_ID` | нет (по умолчанию `gpt-image-1`) | Модель для генерации изображений. |
| `GENAPI_SIZE` | нет (по умолчанию `1024x1024`) | Размер изображений. |
| `GENAPI_QUALITY` | нет (по умолчанию `low`) | Качество изображения (`low`, `medium`, `high`). |
| `GENAPI_BACKGROUND` | нет (по умолчанию `transparent`) | Цвет фона генерации (`white` или `transparent`). |
| `GENAPI_IS_SYNC` | нет (по умолчанию `true`) | Синхронный режим генерации. |
| `GENAPI_CALLBACK_URL` | нет | URL для асинхронного callback'а. |

При отсутствии любой обязательной переменной при импорте `settings` будет
вызвано исключение `RuntimeError` с названием пропущенного ключа.
